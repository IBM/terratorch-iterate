benchmark_suffix: full_benchmark
experiment_name: backbone_benchmark
backbone:
  backbone: prithvi_swin_B
tasks:
  - name: agb
    type: regression
    loss: rmse
    bands:
      - BLUE
      - GREEN
      - RED
      - NIR_NARROW
      - SWIR_1
      - SWIR_2
    ignore_index: -1
    backbone_args:
      drop_path_rate: 0.3
    max_epochs: 60
    head_args:
      final_act: torch.nn.ReLU
      learned_upscale_layers: 2
      channel_list:
        - 64
    datamodule: benchmark/resources/dataset_specifications/agb.yaml
    decoder: UperNetDecoder
    decoder_args:
      channels: 128
    metric: val/RMSE
  - name: sen1floods11
    type: segmentation
    loss: ce
    ignore_index: -1
    bands:
      - BLUE
      - GREEN
      - RED
      - NIR_NARROW
      - SWIR_1
      - SWIR_2
    max_epochs: 60
    datamodule: benchmark/resources/dataset_specifications/sen1floods11.yaml
    decoder: UperNetDecoder
    decoder_args:
      channels: 128
    metric: val/loss
  - name: eurosat
    type: classification
    loss: ce
    bands:
      - BLUE
      - GREEN
      - RED
      - NIR_NARROW
      - SWIR_1
      - SWIR_2
    num_classes: 10
    max_epochs: 60
    datamodule: benchmark/resources/dataset_specifications/eurosat.yaml
    decoder: IdentityDecoder
    metric: val/loss
    optimization_except:
      - decoder_channels
      - head_dropout
      # - decoder
n_trials: 20
save_models: False
storage_uri: /dccstor/geofm-finetuning/carlosgomes/benchmark
optimization_space:
  # decoder:
  #   - FCNDecoder
  #   - UperNetDecoder
  lr:
    min: 5e-6
    max: 1e-3
    type: real
    log: true
  batch_size:
    - 8
    - 16
    - 32
    # - 64
  decoder_channels:
    #   - 32
    - 64
    - 128
  head_dropout:
    min: 0.4
    max: 0.8
    type: real
  freeze_backbone:
    - true
    - false
